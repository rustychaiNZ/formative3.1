var myKey=JSON.parse(apiKey);myKey=myKey[0].key;var languages=[{code:0,name:"All"},{code:"ar",name:"Arabic"},{code:"de",name:"German"},{code:"en",name:"English"},{code:"es",name:"Spanish"},{code:"fr",name:"French"},{code:"he",name:"Hewbrew"},{code:"it",name:"Italian"},{code:"nl",name:"Dutch"},{code:"no",name:"Norwegian"},{code:"pt",name:"Portuguese"},{code:"ru",name:"Russian"},{code:"se",name:"Northern Sami"},{code:"zh",name:"Chinese"}],countrys=[{code:0,name:"All"},{code:"ar",name:"Argentina"},{code:"au",name:"Australia"},{code:"at",name:"Austria"},{code:"be",name:"Belgium"},{code:"br",name:"Brazil"},{code:"bg",name:"Bulgaria"},{code:"ca",name:"Canada"},{code:"cn",name:"China"},{code:"co",name:"Colombia"},{code:"cu",name:"Cuba"},{code:"cz",name:"Czechia"},{code:"eg",name:"Egypt"},{code:"fr",name:"France"},{code:"de",name:"Germany"},{code:"gr",name:"Greece"},{code:"hk",name:"Hong Kong"},{code:"hu",name:"Hungary"},{code:"in",name:"India"},{code:"id",name:"Indonesia"},{code:"ie",name:"Ireland"},{code:"il",name:"Israel"},{code:"it",name:"Italy"},{code:"jp",name:"Japan"},{code:"kr",name:"Korea"},{code:"lv",name:"Latvia"},{code:"lt",name:"Lithuania"},{code:"my",name:"Malaysia"},{code:"mx",name:"Mexico"},{code:"ma",name:"Morocco"},{code:"nl",name:"Netherlands"},{code:"nz",name:"New Zealand"},{code:"ng",name:"Nigeria"},{code:"no",name:"Norway"},{code:"ph",name:"Philippines"},{code:"pl",name:"Poland"},{code:"pt",name:"Portugal"},{code:"ro",name:"Romania"},{code:"ru",name:"Russian Federation"},{code:"sa",name:"Saudi Arabia"},{code:"rs",name:"Serbia"},{code:"sg",name:"Singapore"},{code:"sk",name:"Slovakia"},{code:"si",name:"Slovenia"},{code:"za",name:"South Africa"},{code:"se",name:"Sweden"},{code:"ch",name:"Switzerland"},{code:"tw",name:"Taiwan"},{code:"th",name:"Thailand"},{code:"tr",name:"Turkey"},{code:"ua",name:"Ukraine"},{code:"ae",name:"United Arab Emirates"},{code:"gb",name:"United Kingdom"},{code:"us",name:"United States"},{code:"ve",name:"Venezuela"}],categorys=[{code:"business",name:"Business"},{code:"entertainment",name:"Entertainment"},{code:"general",name:"General"},{code:"health",name:"Health"},{code:"science",name:"Science"},{code:"sports",name:"Sports"},{code:"technology",name:"Technology"}];function backupImage(e){return e.src="assets/temporary.jpg",e.onerror="",!0}$(document).ready(function(){var e,t,n,a,o,c="",r="",d="";function s(){for(e=0;e<categorys.length;e++)n===categorys[e].name&&"noCountry"!==t?(r="&category="+categorys[e].code,a="top-headlines"):n===categorys[e].name&&"noCountry"===t&&(r="category="+categorys[e].code,c="",a="top-headlines");for(e=0;e<countrys.length;e++)if(t===countrys[e].name&&"noCatagory"===n)c="country="+countrys[e].code,r="",a="top-headlines";else if(t===countrys[e].name&&"noCatagory"!==n)c="country="+countrys[e].code,a="top-headlines";else if("noCountry"===t&&"noCatagory"===n&&""===o){c="",r="",document.getElementById("messages").innerHTML+='<div class="alert alert-danger alert-dismissible fade show" role="alert">\n\t\t\t\t\t\t<strong>O Oh!</strong> Please select a country, a category or enter a search query.\n\t\t\t\t\t\t<button type="button" class="close" data-dismiss="alert" aria-label="Close"> \n\t\t\t\t\t\t\t<span aria-hidden="true">&times;</span> \n\t\t\t\t\t\t</button> \n\t\t\t\t\t</div>';break}}function m(){t=document.getElementById("selectCountry").value,n=document.getElementById("selectCatagory").value,d=document.getElementById("searchQuery").value,"noCountry"!==t||"noCatagory"!==n?$("#searchQuery").prop("disabled",!0):"noCountry"===t&&"noCatagory"===n&&$("#searchQuery").prop("disabled",!1),""!==d?($("#selectCountry").prop("disabled",!0),$("#selectCatagory").prop("disabled",!0)):""===d&&($("#selectCountry").prop("disabled",!1),$("#selectCatagory").prop("disabled",!1))}$("#selectCatagory").change(function(){m()}),$("#selectCountry").change(function(){m()}),$("#searchQuery").keyup(function(){m()}),$("#resetFilters").click(function(){t=document.getElementById("selectCountry").value="noCountry",n=document.getElementById("selectCatagory").value="noCatagory",d=document.getElementById("searchQuery").value="",m()}),$("#searchNews").click(function(){document.getElementById("messages").innerHTML="",document.getElementById("newsResults").innerHTML="",s(),""!==d?(a="everything",o="q="+d+"&language=en",c="",r="",document.getElementById("searchQuery").value="",document.getElementById("selectCatagory").value="noCatagory",document.getElementById("selectCountry").value="noCountry",document.getElementById("newsResults").innerHTML="",document.getElementById("messages").innerHTML+=`<h3>Query:<b> ${d}</b></h3>`):""==d&&(o=""),m();var t=`http://newsapi.org/v2/${a}?${c}${r}${o}&apiKey=${myKey}`;$.ajax({url:t,method:"GET",dataType:"Json",beforeSend:function(){$(".spinner-border").show()},complete:function(){$(".spinner-border").hide()},success:function(t){var n="",a=t.articles;for(e in a)n+=`\n\t\t\t\t\t\t<div class="col-md-6 col-lg-4 col-xl-3 d-flex align-self-stretch py-4"> \n\t\t\t\t\t\t\t<div class="card shadow-sm"> \n\t\t\t\t\t\t\t\t<img onerror="backupImage(this)" src="${a[e].urlToImage}" alt="article image" style="width:100%;"> \n\t\t\t\t\t\t\t\t<div class="card-body">\n\t\t\t\t\t\t\t\t\t<h4>${a[e].title}</h4>\n\t\t\t\t\t\t\t\t\t<h5 class="small text-secondary">${a[e].author} - ${a[e].source.name}</h5> \n\t\t\t\t\t\t\t\t\t<p>${a[e].description}</p> \n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="card-footer"> \n\t\t\t\t\t\t\t\t\t<a href="${a[e].url}" target="_blank"><button class="btn btn-primary">Full Article</button></a> \n\t\t\t\t\t\t\t\t</div> \n\t\t\t\t\t\t\t</div> \n\t\t\t\t\t\t</div>`;""!==n&&$("#newsResults").html(n)},error:function(){document.getElementById("messages").innerHTML="",s()}})})});